<aura:component controller="Einstein_PlaygroundController">

    <aura:attribute name="dataset" type="Einstein_Dataset" />
    <aura:attribute name="models" type="Einstein_Model[]" />
    <aura:attribute name="currentTab" type="String" default="labels" />

    <aura:registerEvent name="waitingEvent" type="c:EventEinsteinWaiting" />
    <aura:registerEvent name="modelEvent" type="c:EventEinsteinModels" />
    <aura:registerEvent name="databaseEvent" type="c:EventEinsteinDataset" />

    <div class="slds-card">
        <lightning:card title="{!v.dataset.name}" iconName="utility:preview">

            <aura:set attribute="actions">
                <aura:if isTrue="{!v.currentTab=='labels'}">
                    <lightning:button label="Train" onclick="{!c.onTrainModel}" />
                    <lightning:button label="Delete" onclick="{!c.onDeleteDataset}" />
                </aura:if>
                <aura:if isTrue="{!v.currentTab=='models'}">
                    <lightning:button label="Refresh Models" onclick="{!c.onRefresh}" />
                </aura:if>
            </aura:set>

            Dataset Id: {!v.dataset.id}
            <lightning:tabset>
                <lightning:tab onactive="{!c.onLabelsTab}">
                    <aura:set attribute="label">
                        Labels <lightning:badge class="slds-badge_inverse" label="{!v.dataset.labelSummary.labels.length}" />
                    </aura:set>
                    <table class="slds-table slds-table--bordered slds-table--cell-buffer">
                        <thead>
                            <tr class="slds-text-title--caps">
                                <th scope="col">
                                    <div class="slds-truncate" title="Name">Label</div>
                                </th>
                                <th scope="col">
                                    <div class="slds-truncate" title="Examples">Examples</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <aura:iteration items="{!v.dataset.labelSummary.labels}" var="label">
                                <tr>
                                    <td data-label="Account Name">
                                        <div class="slds-truncate" title="{!label.name}">{!label.name}</div>
                                    </td>
                                    <td data-label="Account Name">
                                        <div class="slds-truncate" title="{!label.numExamples}">{!label.numExamples}</div>
                                    </td>
                                </tr>
                            </aura:iteration>
                        </tbody>
                    </table>
                </lightning:tab>
                <lightning:tab onactive="{!c.onModelsTab}">
                    <aura:set attribute="label">
                        Models <lightning:badge class="slds-badge_inverse" label="{!v.models.length}" />
                    </aura:set>
                    <table class="slds-table slds-table--bordered slds-table--cell-buffer">
                        <thead>
                            <tr class="slds-text-title--caps">
                                <th scope="col">
                                    <div class="slds-truncate" title="Model Id">Model Id</div>
                                </th>
                                <th scope="col">
                                    <div class="slds-truncate" title="Progress">Progress</div>
                                </th>
                                <th scope="col">
                                    <div class="slds-truncate" title="Status">Status</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <aura:iteration items="{!v.models}" var="model">
                                <tr>
                                    <td data-label="Model Id">
                                        <div class="slds-truncate" title="{!model.modelId}">{!model.modelId}</div>
                                    </td>
                                    <td data-label="Progress">
                                        <div class="slds-truncate" title="{!model.progress}">{!model.progress * 100} %</div>
                                    </td>
                                    <td data-label="Status">
                                        <div class="slds-truncate" title="{!model.status}">{!model.status}</div>
                                    </td>
                                </tr>
                            </aura:iteration>
                        </tbody>
                    </table>
                </lightning:tab>
            </lightning:tabset>

        </lightning:card>
    </div>

</aura:component>